<a href="./README.md">![Static Badge](https://img.shields.io/badge/english-118027)</a>
<a href="./README.ru.md">![Static Badge](https://img.shields.io/badge/russian-0390fc)</a>
<p align="center">
    <picture>
        <source media="(prefers-color-scheme: dark)" srcset="Media/logo-fsm-dark.png">
        <source media="(prefers-color-scheme: light)" srcset="Media/logo-fsm.png">
        <img alt="FSM –¥–ª—è Shardy" height="256" width="256" src="Media/logo-fsm.png">
    </picture>
</p>
<h3 align="center">FSM –¥–ª—è Shardy</h3>
<h4 align="center">–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –æ–Ω–ª–∞–π–Ω –∏–≥—Ä –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</h4>
<p align="center">
    <a href="#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</a> ¬∑ <a href="./Documentation~/index.md">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a> ¬∑ <a href="https://github.com/mopsicus/shardy-unity">Unity –∫–ª–∏–µ–Ω—Ç</a> ¬∑ <a href="https://github.com/mopsicus/shardy">Shardy</a> ¬∑ <a href="https://github.com/mopsicus/shardy-fsm/issues">–û—Ç—á—ë—Ç –æ–± –æ—à–∏–±–∫–µ</a>
</p>

# üí¨ –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ (FSM) –¥–ª—è Shardy –∏ –Ω–µ —Ç–æ–ª—å–∫–æ. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫–∏–π API –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è FSM —Å –ø–æ–º–æ—â—å—é —Ü–µ–ø–æ—á–∫–∏ –º–µ—Ç–æ–¥–æ–≤ –∏ —É—Å–ª–æ–≤–∏–π.

> [!NOTE] 
> Shardy ‚Äì —ç—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –æ–Ω–ª–∞–π–Ω –∏–≥—Ä –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Node.js. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π: –º–æ–±–∏–ª—å–Ω—ã—Ö, —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö, –≤–µ–±, –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–≥—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —á–∞—Ç–æ–≤, middleware —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ç.–ø.
>
> [–£–∑–Ω–∞—Ç—å –ø—Ä–æ Shardy](https://github.com/mopsicus/shardy) üí™

# ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ì–∏–±–∫–∏–π API: —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ç—Ä–∏–≥–≥–µ—Ä—ã, —É—Å–ª–æ–≤–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è UML-–¥–∏–∞–≥—Ä–∞–º–º (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–º–µ—Ç–æ–∫)
- –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, —Å–Ω–∏–ø–ø–µ—Ç—ã, –ø—Ä–∏–º–µ—Ä—ã
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

# üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–°–∫–∞—á–∞–π—Ç–µ –ø–∞–∫–µ—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã [—Ä–µ–ª–∏–∑–æ–≤](https://github.com/mopsicus/shardy-fsm/releases) –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ—á–∫—É –Ω–∏–∂–µ –≤ –≤–∞—à —Ñ–∞–π–ª `Packages/manifest.json` –∏ –ø–∞–∫–µ—Ç –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```
"com.mopsicus.shardy.fsm": "https://github.com/mopsicus/shardy-fsm.git",
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ—ë –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏ "—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏" —Å —Ç–µ–∫—É—â–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º. –¢–∞–∫ –∫–∞–∫ Shardy –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ VS Code, —Ç–æ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã –¥–ª—è –Ω–µ–≥–æ.

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Monokai Pro` –∏–ª–∏ `eppz!` —Ç–µ–º—É
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `FiraCode` —à—Ä–∏—Ñ—Ç
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
   - C#
   - C# Dev Kit
   - Unity
4. –í–∫–ª—é—á–∏—Ç–µ `Inlay Hints` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö C# —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç `Visual Studio Editor` –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ Unity
6. –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª `.editorconfig` –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
7. –£—Ä–∞!

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç
2. –î–æ–±–∞–≤—å—Ç–µ `Shardy.FSM` –≤ —Ä–∞–∑–¥–µ–ª uses
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã
4. –í—ã–∑–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ `Builder`.
5. –î–æ–±–∞–≤—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ç—Ä–∏–≥–≥–µ—Ä—ã, —É—Å–ª–æ–≤–∏—è
6. –í—ã–∑–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ `Build` –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
7. –í—ã–∑–æ–≤–∏—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä(—ã)
8. –ü—Ä–æ—Ñ–∏—Ç

```csharp
using Shardy.FSM;

/// <summary>
/// Test FSM
/// </summary>
void Test() {
    _fsm = FSM<State, Action>.Builder(State.Standing)
    .State(State.Standing)
    .OnEnter((data) => {
        Debug.Log("on enter standing");
    })
    .To(State.Sitting).On(Action.Down)
    .To(State.Jumping).On(Action.Space).If(s => _isConditionActive)
    .State(State.Sitting)
    .To(State.Lying).On(Action.Down)
    .To(State.Standing).On(Action.Up)
    .State(State.Lying)
    .To(State.Sitting).On(Action.Up)
    .State(State.Jumping)
    .Note("some help message here")
    .OnExit((data) => {
        Debug.Log("on exit jumping");
    })
    .To(State.Standing).On(Action.Down)
    .Build();

    _fsm.Trigger(Action.Down);
}
```

### –£—Å–ª–æ–≤–∏—è

–ö –ø–µ—Ä–µ—Ö–æ–¥–∞–º —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ(—è). –ü—Ä–∏ –≤—ã–∑–æ–≤–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ª–∏ –≤—Å–µ —É—Å–ª–æ–≤–∏—è, –∏ –µ—Å–ª–∏ —ç—Ç–æ —Ç–∞–∫, —Ç–æ –ø–µ—Ä–µ—Ö–æ–¥ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è.

```csharp
State(State.Standing).To(State.Jumping).On(Action.Space).If(YOUR_CONDITION)
```

### UML

FSM –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π UML:

```uml
@startuml
skin rose
title TestFSM
left to right direction
agent Standing
agent Sitting
agent Lying
agent Jumping
note left of Jumping
some help message here
end note
Start --> Standing
Standing --> Sitting : Down
Standing ~~> Jumping : Space
Sitting --> Lying : Down
Sitting --> Standing : Up
Lying --> Sitting : Up
Jumping --> Standing : Down
@enduml
```

–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –µ–≥–æ –Ω–∞ https://www.planttext.com –∏–ª–∏ http://www.plantuml.com/plantuml/uml/ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å FSM –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤:

<p align="center">
    <picture>
        <img alt="UML –¥–∏–∞–≥—Ä–∞–º–º–∞" height="272" width="642" src="Media/uml-fsm.png">
    </picture>
</p>

> [!IMPORTANT] 
> –ü—É–Ω–∫—Ç–∏—Ä–Ω—ã–µ –ª–∏–Ω–∏–∏ - –ø–µ—Ä–µ—Ö–æ–¥—ã, —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏.

> [!NOTE]
> –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ–∞–π–ª —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º UML –∏ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É –ø–æ –∞–¥—Ä–µ—Å—É url: http://www.plantuml.com/plantuml/proxy?src=XXX, –≥–¥–µ XXX - —ç—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞—à —Ñ–∞–π–ª *.puml.

### –î–µ–º–æ

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Å–∫–∞—á–∞–π—Ç–µ [–¥–µ–º–æ](./Samples~/Demo). –≠—Ç–æ –¥–µ–º–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä FSM —Å –Ω–µ–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤.

_–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ Unity 2022.3.x_

# üèóÔ∏è –†–∞–∑–≤–∏—Ç–∏–µ

–ú—ã –ø—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥ –∏ –ø–æ–º–æ—á—å —É–ª—É—á—à–∏—Ç—å FSM –¥–ª—è Shardy. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [–¥–æ–∫—É–º–µ–Ω—Ç–æ–º](./CONTRIBUTING.md). ü§ó

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç Shardy:

- –ü–æ–º–æ–≥–∞—è –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ú–æ–Ω–∏—Ç–æ—Ä—è —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–±–ª–µ–º
- –†–∞—Å—Å–∫–∞–∑–∞–≤ –æ –ø—Ä–æ–µ–∫—Ç–µ –≤ —Å–≤–æ–∏—Ö —Å–æ—Ü—Å–µ—Ç—è—Ö
- –ò—Å–ø–æ–ª—å–∑—É—è –µ–≥–æ –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

# ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –ª—é–±—ã–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –Ω–∏–∂–µ:

* Bitcoin (BTC): 1VccPXdHeiUofzEj4hPfvVbdnzoKkX8TJ
* USDT (TRC20): TMHacMp461jHH2SHJQn8VkzCPNEMrFno7m
* TON: UQDVp346KxR6XxFeYc3ksZ_jOuYjztg7b4lEs6ulEWYmJb0f
* –ö–∞—Ä—Ç—ã Visa, Mastercard —á–µ—Ä–µ–∑ [Boosty](https://boosty.to/mopsicus/donate)
* –ö–∞—Ä—Ç—ã –ú–ò–† —á–µ—Ä–µ–∑ [CloudTips](https://pay.cloudtips.ru/p/9f507669)

# ‚úâÔ∏è –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å, –ª—É—á—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ [–ø—Ä–æ–±–ª–µ–º—ã](https://github.com/mopsicus/shardy-fsm/issues), —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ [email](mailto:mail@mopsicus.ru) –∏–ª–∏ [Telegram](https://t.me/mopsicus).

# üîë –õ–∏—Ü–µ–Ω–∑–∏—è

FSM –¥–ª—è Shardy –≤—ã–ø—É—â–µ–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT](./LICENSE.md). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ —Ä–∞–¥—É–π—Ç–µ—Å—å. üéâ